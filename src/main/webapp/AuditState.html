<!DOCTYPE html>
<html>
  <head>

    <title></title>
    <meta charset="utf-8">

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link href="css/bootstrap.min.css" rel="stylesheet">
	<!-- iziToast -->
	<link rel="stylesheet" href="css/iziToast.min.css">
	
	
	
	<script src="js/jquery-1.11.0.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	
    <!-- 表格依赖 -->
    <script src="js/raydreams.js"></script>
    <script src="js/data.js"></script>
    
    <!-- iziToast -->
    <script src="js/iziToast.min.js" type="text/javascript"></script>
    <style>
    	
    </style>
    
    
  </head>
  
  <body>

	<div style="margin:auto; width:95%;padding:2em 0;">
		<div id="dataTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
	            
		</div>
	</div>

	
	<script src="http://cdn.bootcss.com/jquery/1.11.0/jquery.min.js" type="text/javascript"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.11.0.min.js"><\/script>')</script>
	<script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="js/raydreams.js"></script>
	<script src="js/data.js"></script>
	<script type="text/javascript">

		// the data table itself
	        var dataTable = null;

	        $(document).ready(function () {
				var AuditedQueue;
				$.ajax({
					url:"",
					data:{},//选择一次性加载，无需向后台传值
					async:false,method:'post',
					success:function(data){
						AuditQueue=data;
					}
				});
	        	dataTable = $("#dataTable").raytable({
	            	//datasource: { data: [], keyfield: 'id' },
	            	datasource:{data:myData},
	            	
	            	columns: [
	                    { title: "文件名", icons: [{ glyph: "glyphicon-info-sign", handler: iconAction, data:"id" }], renderIf: isManager },
	                    { field: "firstName", title: "上传时间", sort:true },
	                    { field: "lastName", title: "文件描述", sort: true },
	                    { field: "title", title: "客户种类" },
	                    { field: "grade", title: "审核状态", sort: true },
	                    { field: "ssn", title: "SSN" ,format:operationPrior  },
	                    //{ field: "birthDate", title: "DOB", sort: true, format: parseDate },
	                    { 
	                    	title: "申请优先", 
	                    	icons: [
	                    		
	                    		{ glyph: "glyphicon-circle-arrow-up", format:operationPrior ,handler: iconAction, data: "id" }
	                    	],
	                    	width:20 
	                    }
	                ],
	            	pagesize: 15,
	            	maxPageButtons: 10,
	            	rowNumbers: true,
	            	rowClickHandler: rowAction
	        	});
				//dataTable.data(myData,'dataTable');
	            //jQuery(".glyphicon").css('cursor', 'pointer');
	            
	            // load some default
	            //doLoad(jQuery("#dataTable"));
	                                 
	        });
			
			// load some data


			// icon clicked event handler
	        function iconAction(event)
	        {
	            // jquery to get the record ID back out
	            var data = jQuery(event.target).data('ray-data');
	            alert('glyph icon data is ' + data);
	            alert('You clicked the icon with data = ' + event.data.id + ' on row ' + event.data.rowIdx );
	        	//console.log($(event.target));
	        	//console.log($(event.target).data('ray-data'));
	        }
	        
	        // row clicked handler
	        function rowAction(event)
	        {
	            // jquery to get the record ID back out
	            //var id = jQuery(event.target).data('ray-key');
	            //alert('You clicked row ' + event.data.rowIdx + ' with object ID ' + event.data.id );
	        }
	        
	        // boolean handler to determine if the cell content is rendered
	    	function isManager(item)
	    	{
	    		return (item.grade > 4);
	    	}
	    	
	    	// custom format handler
	    	//function parseDate(item)
	    	//{
	    		// source is ISO 8601
	    		//var d = new Date(item.birthDate);
	    		//return d.toDateString();
	    	//}
	    	function operationPrior(item){
	    		console.log(item);
	    		return "t"+item.grade;
	    	}

	    </script>
  </body>
</html>
