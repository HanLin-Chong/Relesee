<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="UTF-8"/>
        <title>上传资料</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fileinput.css" media="all" rel="stylesheet" type="text/css" />
        <!-- iziToast -->3
        
		<link rel="stylesheet" href="css/iziToast.min.css">
        
        <script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
        <script>window.jQuery || document.write('<script src="js/jquery-1.11.0.min.js"><\/script>')</script>
        <script src="js/fileinput.js" type="text/javascript"></script>
        <!--简体中文-->
        <script src="js/locales/zh.js" type="text/javascript"></script>
        
        <script src="js/bootstrap.min.js"></script>
        <!-- iziToast -->
    	<script src="js/iziToast.min.js" type="text/javascript"></script>
        
    </head>
    <body>
    <div class=".col-lg-">
    	<form id="myform" method="post" action="upload/ajax/multifile" enctype="multipart/form-data">
    		<label>请上传资料</label>

    		<div class="input-group" >

			  <span class="input-group-addon" id="basic-addon3">如有需要请添加备注：</span>

			  <textarea id="notes" class="form-control" name="descripiton" rows="5"></textarea>

			</div>
			<input id="uploadfile" name="files" type="file" multiple>
    		
    	</form>
    </div>           
    </body>
	<script>//参考手册：https://blog.csdn.net/u012526194/article/details/69937741
    $('#uploadfile').fileinput({
    	zoomModalHeight:100,
        language: 'zh',
        uploadUrl: 'upload/ajax/multifile',
        allowedFileExtensions : ['rar', 'zip','txt','jpg'],
		//allowedPreviewTypes : false,
		//showRemove:false,
		dropZoneEnabled: true,
		browseOnZoneClick:true,
		textEncoding:'UTF-8',
		removeFromPreviewOnError:true,
    });
    
    
    
    
    $(document).ready(function(){
    	//异步上传返回结果处理
    	
		$("#uploadfile").on("fileuploaded", function (event, data, previewId, index) {
			var response = data.response;
			iziToast.show({
			    title: response[0].title,
			    message: response[0].message,
			    color:'blue',
			    layout:1
			});
			
			//var notes = $("#notes").val();
			//if(notes != "" || notes != null){
				
			//}
			
			
			
			
			
		    //console.log("after");
		    //console.log(response);
		});        
		//上传前
		$('#uploadfile').on('filepreupload', function(event, data, previewId, index) {
   			var form = data.form, files = data.files, extra = data.extra,
    		response = data.response, reader = data.reader;
    		//console.log("efore");
    		//console.log(response);
    		
		});
		$("#submit").click(function(){
			$("#form").submit();
		});
    });
    
	</script>
</html>